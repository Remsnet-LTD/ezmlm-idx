# $Id$

###############
# ezmlm-store #
###############

if [ "$SECT" -le "2" ]; then

prompt "ezmlm-store (2/2):    "

MOD1=`${GREP} -l "mod1" $SINKDIR/new/* 2>/dev/null`
if [ -z "$MOD1" ]; then
	fatal "ezmlm-store: failed to deliver mod request to moderator"
fi
${GREP} "mod2" $SINKDIR/new/* >/dev/null && \
	fatal "ezmlm-store: didn't post directly in absence of DIR/modpost"
MOD3=`${GREP} -l "mod3" $SINKDIR/new/* 2>/dev/null`
if [ -z "$MOD3" ]; then
	fatal "ezmlm-store: -P failed to deliver mod request to moderator"
fi
${GREP} "mod4" $SINKDIR/new/* >/dev/null && \
	fatal "ezmlm-store: -P failed to reject message from non-mod"

${ECHO} "OK"

fi
